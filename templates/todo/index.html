{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block content %}

  <h1>
    TODO list
    <a href="{% url 'todo:task-create' %}" class="btn btn-primary link-to-page">
      Create
    </a>
  </h1>
  {% if task_list %}
    <ul>
      {% for task in task_list %}
        <div class="card col-md-8">
          <li class="list-group">
            <div class="card-body mx-2">
              <div class="card-text">
                <div class="d-flex justify-content-between">
                  <h2>{{ task.name }}
                    {% if task.status %}
                      <i class="mx-5" style="color: green">Done</i>
                    {% else %}
                      <i class="mx-5" style="color: red">Not done</i>
                    {% endif %}
                  </h2>
                      <form
                          action="{% url "todo:change-status" pk=task.pk %}"
                          method="post">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-secondary mt-2"
                                style="width: 200px">
                          {% if task.status %}
                            Undo
                          {% else %}
                            Complete
                          {% endif %}
                        </button>
                      </form>
                </div>
                <h4>{{ task.description }}</h4>
              <div class="d-flex justify-content-between">
                <p class="hidden">Created at  {{ task.creation_date }}</p>
                <p>Deadline {{ task.deadline }}</p>
              </div>
                {% if task.tags %}
                {% for tag in task.tags.all %}
                    <i class="btn btn-secondary"> {{ tag.name }} </i>
                {% endfor %}
                {% endif %}
              </div>
            </div>
          </li>
        </div>
      {% endfor %}
    </ul>
  {% else %}
    <p>There are no task in ToDo list</p>
  {% endif %}

{% endblock %}